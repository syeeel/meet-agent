<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Meeting Assistant</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Hedra Avatar Video (full screen) -->
  <video id="avatar-video" autoplay playsinline muted
    style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; object-fit:cover; z-index:0;">
  </video>

  <!-- Avatar audio output (played through speakers, captured by Recall.ai as bot's microphone) -->
  <audio id="avatar-audio" autoplay style="display:none;"></audio>

  <!-- Hedra mode overlay (minimal status badge) -->
  <div id="hedra-overlay" style="display:none; position:fixed; top:12px; right:12px; z-index:10;">
    <div id="hedra-status" class="status connecting" style="background:rgba(0,0,0,0.6); padding:6px 14px; border-radius:16px; font-size:13px;">
      <span class="status-dot"></span>
      <span class="status-text">接続中...</span>
    </div>
  </div>

  <!-- Fallback container (SVG avatar mode, shown when LiveKit not available) -->
  <div id="fallback-container" class="container">
    <div class="header">
      <div class="avatar">
        <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <circle cx="50" cy="50" r="45" fill="#4A90D9"/>
          <circle cx="35" cy="40" r="8" fill="#fff"/>
          <circle cx="65" cy="40" r="8" fill="#fff"/>
          <path d="M 30 65 Q 50 80 70 65" stroke="#fff" stroke-width="4" fill="none"/>
        </svg>
      </div>
      <h1>AI Assistant</h1>
    </div>

    <div class="status-container">
      <div id="connection-status" class="status connecting">
        <span class="status-dot"></span>
        <span class="status-text">接続中...</span>
      </div>
    </div>

    <div class="activity-container">
      <div id="listening-indicator" class="indicator hidden">
        <div class="sound-wave">
          <span></span><span></span><span></span><span></span><span></span>
        </div>
        <span>聞いています...</span>
      </div>

      <div id="thinking-indicator" class="indicator hidden">
        <div class="thinking-dots">
          <span></span><span></span><span></span>
        </div>
        <span>考えています...</span>
      </div>

      <div id="speaking-indicator" class="indicator hidden">
        <div class="speaking-wave">
          <span></span><span></span><span></span>
        </div>
        <span>話しています...</span>
      </div>
    </div>

    <div class="transcript-container">
      <h2>最近の発言</h2>
      <div id="transcript-list"></div>
    </div>

    <div class="response-container">
      <h2>AIの回答</h2>
      <div id="ai-response"></div>
    </div>
  </div>

  <!-- LiveKit Client SDK -->
  <script src="https://cdn.jsdelivr.net/npm/livekit-client/dist/livekit-client.umd.js"></script>
  <script src="main.js"></script>
</body>
</html>
